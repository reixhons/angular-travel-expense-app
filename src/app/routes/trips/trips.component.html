<div class="top-trips">
    <div class="container fade-in">
        <h1>Hello there!</h1>
        <h4>Keep all your travel expenses organized in one place, gain insights into your spending, and make budgeting
            hassle-free.</h4>
        <div class="grid-header">
            <div class="left">
                <div class="label">My Trips</div>
                <div class="count">8</div>
            </div>
            <div class="right">
                <button class="add-button" (click)="openCustomDialog()">
                    <img src="icons/plus.svg" alt="add">
                    Add Trip</button>
            </div>
        </div>

        @if (error()) {
        <div class="bg-red-500 border-l-4 border-red-400 p-4 rounded-xl mb-8 shadow-md">
            <div class="flex items-center">
                <mat-icon class="text-red-100 mr-3">error_outline</mat-icon>
                <p class="text-red-100 font-medium">{{ error() }}</p>
            </div>
        </div>
        }

        @if (isLoading()) {
        <div class="flex justify-center items-center h-64">
            <mat-spinner diameter="48" class="!text-indigo-600"></mat-spinner>
        </div>
        } @else {
        @if (!trips().length) {
        <div class="flex justify-center items-center h-64">
            <p class="text-gray-500 font-medium">No trips found</p>
        </div>
        } @else {

        <div class="trips-container">
            @for (trip of trips(); track trip.id) {
            <div class="trip-card">
                <div class="header">
                    <div [class]="'status-badge colored-status  ' + getStatusClass(trip.status)">{{ trip.status }}
                    </div>
                    @if (trip.status === 'DRAFT') {
                    <div class="approve" (click)="updateTripStatus(trip)">
                        <img src="icons/send.svg" alt="approve">
                    </div>
                    }
                </div>
                <div class="circle"></div>
                <div class="trip-info">
                    <div class="title">{{ trip.name }}</div>
                    <div class="duration">{{ getTripDuration(trip.startDate, trip.endDate) }} Days Journey</div>
                </div>
                <div class="stat">
                    <div class="date">
                        <div class="icon">
                            <img src="icons/calendar-filled.svg" alt="calendar">
                        </div>
                        <span>{{ trip.startDate | date:'mediumDate' }} - {{ trip.endDate | date:'mediumDate'
                            }}</span>
                    </div>
                    <div class="budget">
                        <div class="icon"><img src="icons/dollar.svg" alt="money"></div> <span>{{
                            getTripExpenses(trip.id) | currency }}</span>
                    </div>
                </div>
                <button class="view-details" [routerLink]="['/trips', trip.id]">
                    View Details
                </button>
            </div>
            }
        </div>
        }
        }
    </div>
</div>