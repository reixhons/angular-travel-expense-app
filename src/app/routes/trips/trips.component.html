<div class="min-h-screen bg-gray-50 py-8">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="bg-white rounded-2xl shadow-sm p-6 mb-8">
            <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
                <div>
                    <h1 class="text-3xl font-bold text-gray-900">
                        Hello, {{userName()}}
                    </h1>
                    <p class="text-gray-600 mt-1">Here's your list of trips</p>
                </div>
                <div class="flex gap-3">
                    <button mat-raised-button color="primary"
                        class="!rounded-xl !px-6 !py-2 !shadow-md hover:!shadow-lg transition-shadow"
                        [disabled]="isLoading()" (click)="openCustomDialog()">
                        <mat-icon>add</mat-icon>
                        New Trip
                    </button>
                    <button mat-raised-button color="warn"
                        class="!rounded-xl !px-6 !py-2 !shadow-md hover:!shadow-lg transition-shadow" (click)="logout()"
                        [disabled]="isLoading()">
                        <mat-icon>logout</mat-icon>
                        Logout
                    </button>
                </div>
            </div>
        </div>

        @if (error()) {
        <div class="bg-red-50 border-l-4 border-red-400 p-4 rounded-lg mb-6">
            <div class="flex">
                <mat-icon class="text-red-400 mr-3">error</mat-icon>
                <p class="text-red-700">{{ error() }}</p>
            </div>
        </div>
        }

        @if (isLoading()) {
        <div class="flex justify-center items-center h-64">
            <mat-spinner diameter="48"></mat-spinner>
        </div>
        } @else {
        @if (!trips().length) {
        <div class="text-center py-16 bg-white rounded-2xl shadow-sm">
            <mat-icon class="text-gray-400 !w-16 !h-16 !text-6xl mb-4">flight</mat-icon>
            <p class="text-gray-500 text-lg">No trips found. Create your first trip!</p>
        </div>
        } @else {
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            @for (trip of trips(); track trip.id) {
            <mat-card class="!rounded-xl !shadow-sm hover:!shadow-md transition-all transform hover:scale-[1.02]">
                <mat-card-header class="!pb-4">
                    <mat-card-title class="!text-xl !font-semibold">{{ trip.name }}</mat-card-title>
                    <mat-card-subtitle class="!mt-1">
                        Duration: {{ getTripDuration(trip.startDate, trip.endDate) }} days
                    </mat-card-subtitle>
                </mat-card-header>
                <mat-card-content class="!px-6 !py-4 border-t border-gray-100">
                    <div class="flex flex-col gap-3">
                        <div class="flex items-center text-gray-600">
                            <mat-icon class="!w-5 !h-5 !text-lg mr-3">calendar_today</mat-icon>
                            <span>{{ trip.startDate | date }} - {{ trip.endDate | date }}</span>
                        </div>
                        <div class="flex items-center text-gray-600">
                            <mat-icon class="!w-5 !h-5 !text-lg mr-3">attach_money</mat-icon>
                            <span>{{ getTripExpenses(trip.id) | currency }}</span>
                        </div>
                        <div class="flex items-center">
                            @if (trip.status === 'DRAFT') {
                            <button mat-button color="accent" class="!rounded-full !text-sm"
                                (click)="updateTripStatus(trip)">
                                <mat-icon class="!w-4 !h-4 !text-base">send</mat-icon>
                                Send for Approval
                            </button>
                            } @else {
                            <div [class]="'status-badge ' + getStatusClass(trip.status)">
                                {{ trip.status }}
                            </div>
                            }
                        </div>
                    </div>
                </mat-card-content>
                <mat-card-actions class="!p-4 flex justify-end border-t border-gray-100">
                    <button mat-button color="primary" [routerLink]="['/trips', trip.id]" class="!rounded-xl">
                        <mat-icon>visibility</mat-icon>
                        View Details
                    </button>
                </mat-card-actions>
            </mat-card>
            }
        </div>
        }
        }
    </div>
</div>